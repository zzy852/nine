<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>index</title>
        <meta name="description" content="">
        <meta name="keywords" content="">
        <link href="css/index.css" rel="stylesheet">
    </head>
    <body>
        <div class="container">
            <table class="nine">
                <tbody>
                    <tr class="row">
                        <td class="item" data-index="1">萌妹子</td>
                        <td class="item" data-index="2">如花</td>
                        <td class="item" data-index="3">女汉子</td>
                    </tr>
                    <tr class="row">
                        <td class="item active" data-index="8">女神</td>
                        <td class="center"><a href="#" class="btn-start">开始</a></td>
                        <td class="item" data-index="4">苍老师</td>
                    </tr>
                    <tr class="row">
                        <td class="item" data-index="7">凤姐</td>
                        <td class="item" data-index="6">郭美美</td>
                        <td class="item" data-index="5">人妖</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <script src="js/jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
        var gRunning = false;
        $(".btn-start").click(function(event) {
            if (gRunning) {
                return;
            }
            gRunning = true;
            next(parseInt(Math.random() * 100 / 2));
        });
        function next(time) {
            var active = $(".item.active"),
                index = active.data("index"),
                num = $(".item").length,
                nextTime = time + 5 * time / 50;
            nextIndex = 1,
                nextItem = null;
            if (index == num) {
                nextIndex = 1;
            } else {
                nextIndex = index + 1;
            }
            active.removeClass("active");
            nextItem = $(".item[data-index=" + nextIndex + "]").addClass('active');
            if (time < 500) {
                window.setTimeout(function() {
                    next(nextTime);
                }, nextTime);
            } else {
                gRunning = false;
                var info = nextItem.text();
                alert("恭喜你获得" + info);
            }
        }
        </script>
    </body>
</html>